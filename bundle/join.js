"use strict";!function(){Vue.component("v-select",VueSelect.VueSelect);new Vue({el:".wrap",data:{step:1,name:"",gender:"",genderOptions:{list:["男","女"]},edu:"",eduOptions:{list:["博士","碩士","大學","高中","高職","國中","國小"]},birth:"",place:"",dept:"",phone:"",email:"",areaData:[],maxHeight:"250px",chkmsg:[],isFocus:"",isDone:!1},computed:{availableCities:function(){return this.place?this.place.store:[]},birthday:function(){return this.birth.getFullYear()+"/"+(this.birth.getMonth()+1<10?"0"+(this.birth.getMonth()+1):this.birth.getMonth()+1)+"/"+(this.birth.getDate()<10?"0"+this.birth.getDate():this.birth.getDate())}},created:function(){window.addEventListener("orientationchange",this.avoidAnriod)},beforeMount:function(){var t=this;$.get(domain+"/golden/api/store_list.ashx",function(e){$.each(e,function(e,s){t.areaData.push({country:e,store:s})})})},mounted:function(){window.onload=function(){document.querySelector(".wrap.join .content").classList.add("in")}},methods:{next:function(){if(console.log(this.dept),document.querySelector(".progress .line").classList.remove("show"),this.chkmsg=[],1==this.step){if(CH.checktxt(this.name)||this.chkmsg.push("姓名"),CH.checktxt(this.gender)||this.chkmsg.push("性別"),""==this.birth&&this.chkmsg.push("生日"),CH.checktxt(this.edu)||this.chkmsg.push("學歷"),0!=this.chkmsg.length)return console.log(this.chkmsg),void swal({text:this.chkmsg+"為必填欄位",type:"error",confirmButtonColor:"#00a83c"});this.step=2}else if(2==this.step){if(""==this.place&&this.chkmsg.push("希望上班地點"),null==this.dept&&this.chkmsg.push("希望指定聯繫單位"),0!=this.chkmsg.length)return console.log(this.chkmsg),void swal({text:this.chkmsg+"為必填欄位",type:"error",confirmButtonColor:"#00a83c"});this.step=3}else if(3==this.step){var t=document.querySelector("#read").checked;if(CH.isValidCell(this.phone)||this.chkmsg.push("手機十碼"),CH.isValidMail(this.email)||this.chkmsg.push("EMAIL"),t||this.chkmsg.push("同意相關規定"),0!=this.chkmsg.length)return console.log(this.chkmsg),void swal({text:this.chkmsg+"為必填欄位",type:"error",confirmButtonColor:"#00a83c"});console.log(this.place.country,this.birthday);var e=this;$.ajax({type:"POST",url:domain+"/golden/api/post_join.ashx",data:{name:this.name,sex:this.gender,email:this.email,phone:this.phone,birthday:this.birthday,education:this.edu,work_place:this.place.country,store:this.dept},complete:function(t){console.log(t),swal({text:"您的資料已成功送出",type:"success",confirmButtonColor:"#00a83c"}).then(function(t){e.isDone=!0,e.step=1,e.name="",e.gender="",e.email="",e.phone="",e.birth="",e.edu="",e.place="",e.dept="",e.chkmsg=[]})}})}this.$nextTick(function(){document.querySelector(".progress .line").classList.add("show")})},avoidAnriod:function(t){(function(){var t=navigator.userAgent||navigator.vendor||window.opera;return!!/android/i.test(t)})()&&(document.querySelector(".trans_bg").classList.add("input_focus"),screen.orientation.onchange=function(){"landscape"==screen.orientation.type.match(/\w+/)[0]&&document.querySelector(".trans_bg").classList.remove("input_focus")})},labelF:function(t){this.isFocus=t},labelB:function(t){this.isFocus=""}},destroyed:function(){window.removeEventListener("orientationchange",this.avoidAnriod)}})}();